<div>
  <%= render "explore/nav" %>

  <div class="px-4 md:px-8 max-w-7xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8" id="projects-grid">
      <% if @projects&.any? %>
        <% @projects.each do |project| %>
          <%= render "projects/project_preview", project: project %>
        <% end %>
      <% end %>
    </div>

    <div id="load-more-projects">
      <% if @pagy&.next %>
        <%= turbo_frame_tag "load-more-projects",
          src: explore_gallery_path(page: @pagy.next, format: :turbo_stream),
          loading: "lazy",
          class: "block" do %>
          <div class="flex flex-col items-center justify-center py-6">
            <%= image_tag 'lollipop.svg', class: 'w-8 h-8 sm:w-16 sm:h-16 animate-spin' %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
